{% extends 'base.html' %}
{% block content %}

<main class="content">
    <article class="post-detail">
        <!-- Post Header -->
        <header class="post-header">
            <div class="post-meta-info">

                {% if post.category %}
                    <span class="meta-chip category">{{ post.category.name }}</span>
                {% else %}
                    <span class="meta-chip category">Uncategorized</span>
                {% endif %}

                {% for tag in post.tags.all %}
                    <span class="meta-chip tag">#{{ tag.name }}</span>
                {% endfor %}

            </div>
            <h1 class="post-title">{{ post.title }}</h1>
            <div class="post-meta-details">
                <span class="post-date">{{ post.published_date|date:"d-m-Y" }}</span>
                <span class="post-views">{{ post.counted_view }} views</span>
                <span class="post-comments">12 comments</span>
            </div>
        </header>

        <!-- Featured Image -->
        <div class="post-featured-image skeleton-container is-loading">
            <div class="skeleton skeleton-image"></div>
            {% if post.image %}
                <img data-src="{{ post.image.url }}" alt="{{ post.title }}" loading="lazy" class="lazy"/>
            {% else %}
            <img data-src="https://picsum.photos/300/200?{{ forloop.counter }}" alt="{{ post.title }}" class="lazy">
            {% endif %}
        </div>

        <!-- Post Content -->
        <div class="post-body">
            <p class="post-intro">
                {{ post.content|safe }}
            </p>
        </div>

{#        <!-- Social Sharing -->#}
{#        <div class="social-share">#}
{#            <button class="share-btn twitter" data-platform="twitter">Twitter</button>#}
{#            <button class="share-btn linkedin" data-platform="linkedin">LinkedIn</button>#}
{#            <button class="share-btn facebook" data-platform="facebook">Facebook</button>#}
{#            <button class="share-btn copy" data-platform="copy">Copy Link</button>#}
{#        </div>#}
        <!-- Author Section -->
        <div class="post-author">
            <div class="author-avatar">
                <img src="{{user.image.url}}" alt="{{ post.author }}"/>
            </div>
            <div class="author-info">
                <h3 class="author-name"><a
                        href="{% url 'accounts:profile' %}">{{ post.author }}</a>  <!--  'blog:author' author_username=post.author.username -->
                </h3>
                <p class="author-bio">UI/UX Designer with 5+ years of experience in creating accessible and
                    beautiful digital experiences. Passionate about inclusive design and user-centered
                    solutions.</p>
                <div class="author-social">
                    <a href="#" class="social-link">Twitter</a>
                    <a href="#" class="social-link">LinkedIn</a>
                    <a href="#" class="social-link">Portfolio</a>
                </div>
            </div>
        </div>

        <!-- Related Posts -->
        <section class="related-posts">
            <h3>Related Articles</h3>
            <div class="related-grid">
                {% for related_post in related_posts %}
                    <article class="related-post">
                        <div class="related-image skeleton-container is-loading">
                            <div class="skeleton skeleton-image"></div>
                            {% if related_post.image %}
                                <img data-src="{{ related_post.image.url }}" alt="{{ related_post.title }}" class="lazy">
                            {% else %}
                                <img data-src="https://picsum.photos/300/200?{{ forloop.counter }}" alt="{{ related_post.title }}" class="lazy">
                            {% endif %}
                        </div>
                        <div class="related-content">
                            <h4>{{ related_post.title }}</h4>
                            <p>{{ related_post.summary|truncatewords:20 }}</p>
                            <a href="{{ related_post.get_absolute_url }}" class="read-more">Read More</a>
                        </div>
                    </article>
                {% empty %}
                    <p>There are no related articles.</p>
                {% endfor %}
            </div>
        </section>
    </article>
</main>

{% endblock content %}
